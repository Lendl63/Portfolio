var h={BACKGROUND_STARS:{count:150,minSize:.5,maxSize:1.5,minOpacity:.1,maxOpacity:.4,speed:.01,glow:!1},MID_STARS:{count:80,minSize:1,maxSize:2.5,minOpacity:.3,maxOpacity:.7,speed:.03,glow:!1},FOREGROUND_STARS:{count:30,minSize:1.5,maxSize:3.5,minOpacity:.5,maxOpacity:1,speed:.05,glow:!0,glowSize:8},GRADIENT:{top:"#0a0e27",middle:"#1a1f3a",bottom:"#0d1425"},MOUSE_INFLUENCE:.3,MOBILE_STAR_REDUCTION:.2},c=()=>window.innerWidth<768||navigator.userAgent.match(/Android|iPhone|iPad|iPod/i),n=class{constructor(t,i,a){this.canvas=t,this.config=i,this.layer=a,this.x=Math.random()*t.width,this.y=Math.random()*t.height,this.originalX=this.x,this.originalY=this.y,this.size=Math.random()*(i.maxSize-i.minSize)+i.minSize,this.opacity=Math.random()*(i.maxOpacity-i.minOpacity)+i.minOpacity,this.baseOpacity=this.opacity,this.twinklePhase=Math.random()*Math.PI*2,this.twinkleSpeed=Math.random()*.02+.01,this.vx=(Math.random()-.5)*i.speed,this.vy=(Math.random()-.5)*i.speed}update(t,i){if(this.x+=this.vx,this.y+=this.vy,this.x<0&&(this.x=this.canvas.width),this.x>this.canvas.width&&(this.x=0),this.y<0&&(this.y=this.canvas.height),this.y>this.canvas.height&&(this.y=0),t&&i&&this.layer>=1){let a=t-this.x,e=i-this.y,s=Math.sqrt(a*a+e*e),l=200;if(s<l){let r=(1-s/l)*h.MOUSE_INFLUENCE;this.x-=a/s*r*2,this.y-=e/s*r*2}}this.twinklePhase+=this.twinkleSpeed,this.opacity=this.baseOpacity*(.5+.5*Math.sin(this.twinklePhase))}draw(t){t.globalAlpha=this.opacity,t.fillStyle="#ffffff",t.beginPath(),t.arc(this.x,this.y,this.size,0,Math.PI*2),t.fill(),this.config.glow&&(t.globalAlpha=this.opacity*.3,t.shadowColor="#ffffff",t.shadowBlur=this.config.glowSize,t.beginPath(),t.arc(this.x,this.y,this.size+1,0,Math.PI*2),t.fill(),t.shadowBlur=0),t.globalAlpha=1}},o=class{constructor(){this.canvas=document.getElementById("galaxyCanvas"),this.ctx=this.canvas.getContext("2d",{alpha:!1}),this.stars={bg:[],mid:[],fg:[]},this.mouseX=null,this.mouseY=null,this.animationId=null,this.setupCanvas(),this.createStars(),this.setupEventListeners(),this.animate()}setupCanvas(){let t=window.devicePixelRatio||1;this.canvas.width=window.innerWidth*t,this.canvas.height=window.innerHeight*t,this.canvas.style.width=window.innerWidth+"px",this.canvas.style.height=window.innerHeight+"px",this.ctx.scale(t,t),this.logicalWidth=window.innerWidth,this.logicalHeight=window.innerHeight}createStars(){this.stars.bg=[],this.stars.mid=[],this.stars.fg=[];let t=c()?h.MOBILE_STAR_REDUCTION:1,i=Math.floor(h.BACKGROUND_STARS.count*t);for(let s=0;s<i;s++)this.stars.bg.push(new n({width:this.logicalWidth,height:this.logicalHeight},h.BACKGROUND_STARS,0));let a=Math.floor(h.MID_STARS.count*t);for(let s=0;s<a;s++)this.stars.mid.push(new n({width:this.logicalWidth,height:this.logicalHeight},h.MID_STARS,1));let e=Math.floor(h.FOREGROUND_STARS.count*t);for(let s=0;s<e;s++)this.stars.fg.push(new n({width:this.logicalWidth,height:this.logicalHeight},h.FOREGROUND_STARS,2))}drawGradient(){let t=this.ctx.createLinearGradient(0,0,0,this.logicalHeight);t.addColorStop(0,h.GRADIENT.top),t.addColorStop(.5,h.GRADIENT.middle),t.addColorStop(1,h.GRADIENT.bottom),this.ctx.fillStyle=t,this.ctx.fillRect(0,0,this.logicalWidth,this.logicalHeight)}setupEventListeners(){c()||(document.addEventListener("mousemove",t=>{this.mouseX=t.clientX,this.mouseY=t.clientY}),document.addEventListener("mouseleave",()=>{this.mouseX=null,this.mouseY=null})),window.addEventListener("resize",()=>{this.setupCanvas(),this.createStars()})}animate(){this.drawGradient(),this.stars.bg.forEach(t=>{t.update(this.mouseX,this.mouseY),t.draw(this.ctx)}),this.stars.mid.forEach(t=>{t.update(this.mouseX,this.mouseY),t.draw(this.ctx)}),this.stars.fg.forEach(t=>{t.update(this.mouseX,this.mouseY),t.draw(this.ctx)}),this.animationId=requestAnimationFrame(()=>this.animate())}destroy(){cancelAnimationFrame(this.animationId)}},d=null;document.addEventListener("DOMContentLoaded",()=>{d=new o});window.addEventListener("beforeunload",()=>{d&&d.destroy()});
